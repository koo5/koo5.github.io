var Ne=t=>{throw TypeError(t)};var We=(t,e,a)=>e.has(t)||Ne("Cannot "+a);var ve=(t,e,a)=>(We(t,e,"read from private field"),a?a.call(t):e.get(t)),me=(t,e,a)=>e.has(t)?Ne("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a),pe=(t,e,a,r)=>(We(t,e,"write to private field"),r?r.call(t,a):e.set(t,a),a);import{t as R,a as z,d as ie,c as Ue}from"../chunks/C6p06w7n.js";import{b as Ct,d as Mt,k as he,h as F,m as zt,Q as Ht,B as o,a3 as jt,T as Lt,V as Ie,j as be,l as X,ah as Nt,W as ft,X as ut,Y as Wt,az as _e,al as dt,N as De,_ as Ut,I as Ee,aA as Te,aB as It,ak as Dt,aC as Ot,aw as Rt,aD as Pe,aE as qt,i as Ft,P as Bt,aF as vt,ad as Jt,aG as Oe,aH as Kt,aq as Vt,q as mt,ar as pt,C as Qt,aI as Yt,K as ce,aJ as Gt,au as Xt,p as Zt,at as $t,u as ea,s as D,f as Z,t as K,a as ta,$ as aa,c as q,E as L,aK as ra,r as U}from"../chunks/z56nQwSQ.js";import{o as sa,d as na,e as ia,s as $}from"../chunks/DDcz2SsJ.js";import{p as la,a as Se,i as Y}from"../chunks/DDfbLTO-.js";import{h as oa}from"../chunks/C1zaSlLS.js";import{r as ca,a as Re,s as qe}from"../chunks/CLjKYyUb.js";import{i as fa,a as ua,b as da,c as va}from"../chunks/DMOAvdi3.js";function Fe(t,e){return e}function ma(t,e,a,r){for(var s=[],u=e.length,l=0;l<u;l++)It(e[l].e,s,!0);var d=u>0&&s.length===0&&a!==null;if(d){var _=a.parentNode;Dt(_),_.append(a),r.clear(),J(t,e[0].prev,e[u-1].next)}Ot(s,()=>{for(var y=0;y<u;y++){var g=e[y];d||(r.delete(g.k),J(t,g.prev,g.next)),Rt(g.e,!d)}})}function le(t,e,a,r,s,u=null){var l=t,d={flags:e,items:new Map,first:null},_=(e&vt)!==0;if(_){var y=t;l=F?he(zt(y)):y.appendChild(Ct())}F&&Ht();var g=null,H=!1,m=jt(()=>{var b=a();return Bt(b)?b:b==null?[]:dt(b)});Mt(()=>{var b=o(m),c=b.length;if(H&&c===0)return;H=c===0;let C=!1;if(F){var S=l.data===Lt;S!==(c===0)&&(l=Ie(),he(l),be(!1),C=!0)}if(F){for(var A=null,P,v=0;v<c;v++){if(X.nodeType===8&&X.data===Nt){l=X,C=!0,be(!1);break}var n=b[v],h=r(n,v);P=ht(X,d,A,null,n,h,v,s,e,a),d.items.set(h,P),A=P}c>0&&he(Ie())}F||pa(b,d,l,s,e,r,a),u!==null&&(c===0?g?ft(g):g=ut(()=>u(l)):g!==null&&Wt(g,()=>{g=null})),C&&be(!0),o(m)}),F&&(l=X)}function pa(t,e,a,r,s,u,l){var j,I,M,T;var d=(s&Kt)!==0,_=(s&(Pe|Te))!==0,y=t.length,g=e.items,H=e.first,m=H,b,c=null,C,S=[],A=[],P,v,n,h;if(d)for(h=0;h<y;h+=1)P=t[h],v=u(P,h),n=g.get(v),n!==void 0&&((j=n.a)==null||j.measure(),(C??(C=new Set)).add(n));for(h=0;h<y;h+=1){if(P=t[h],v=u(P,h),n=g.get(v),n===void 0){var f=m?m.e.nodes_start:a;c=ht(f,e,c,c===null?e.first:c.next,P,v,h,r,s,l),g.set(v,c),S=[],A=[],m=c.next;continue}if(_&&ha(n,P,h,s),(n.e.f&_e)!==0&&(ft(n.e),d&&((I=n.a)==null||I.unfix(),(C??(C=new Set)).delete(n))),n!==m){if(b!==void 0&&b.has(n)){if(S.length<A.length){var i=A[0],p;c=i.prev;var w=S[0],k=S[S.length-1];for(p=0;p<S.length;p+=1)Be(S[p],i,a);for(p=0;p<A.length;p+=1)b.delete(A[p]);J(e,w.prev,k.next),J(e,c,w),J(e,k,i),m=i,c=k,h-=1,S=[],A=[]}else b.delete(n),Be(n,m,a),J(e,n.prev,n.next),J(e,n,c===null?e.first:c.next),J(e,c,n),c=n;continue}for(S=[],A=[];m!==null&&m.k!==v;)(m.e.f&_e)===0&&(b??(b=new Set)).add(m),A.push(m),m=m.next;if(m===null)continue;n=m}S.push(n),c=n,m=n.next}if(m!==null||b!==void 0){for(var x=b===void 0?[]:dt(b);m!==null;)(m.e.f&_e)===0&&x.push(m),m=m.next;var E=x.length;if(E>0){var N=(s&vt)!==0&&y===0?a:null;if(d){for(h=0;h<E;h+=1)(M=x[h].a)==null||M.measure();for(h=0;h<E;h+=1)(T=x[h].a)==null||T.fix()}ma(e,x,N,g)}}d&&Jt(()=>{var B;if(C!==void 0)for(n of C)(B=n.a)==null||B.apply()}),De.first=e.first&&e.first.e,De.last=c&&c.e}function ha(t,e,a,r){(r&Pe)!==0&&Oe(t.v,e),(r&Te)!==0?Oe(t.i,a):t.i=a}function ht(t,e,a,r,s,u,l,d,_,y){var g=(_&Pe)!==0,H=(_&qt)===0,m=g?H?Ut(s):Ee(s):s,b=(_&Te)===0?l:Ee(l),c={i:b,v:m,k:u,a:null,e:null,prev:a,next:r};try{return c.e=ut(()=>d(t,m,b,y),F),c.e.prev=a&&a.e,c.e.next=r&&r.e,a===null?e.first=c:(a.next=c,a.e.next=c.e),r!==null&&(r.prev=c,r.e.prev=c.e),c}finally{}}function Be(t,e,a){for(var r=t.next?t.next.e.nodes_start:a,s=e?e.e.nodes_start:a,u=t.e.nodes_start;u!==r;){var l=Ft(u);s.before(u),u=l}}function J(t,e,a){e===null?t.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function Je(t,e,a){Vt(()=>{var r=mt(()=>e(t,a==null?void 0:a())||{});if(a&&(r!=null&&r.update)){var s=!1,u={};pt(()=>{var l=a();Qt(l),s&&Yt(u,l)&&(u=l,r.update(l))}),s=!0}if(r!=null&&r.destroy)return()=>r.destroy()})}function bt(t){var e,a,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(a=bt(t[e]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}function ba(){for(var t,e,a=0,r="",s=arguments.length;a<s;a++)(t=arguments[a])&&(e=bt(t))&&(r&&(r+=" "),r+=e);return r}function _a(t){return typeof t=="object"?ba(t):t??""}const Ke=[...` 	
\r\fÂ \v\uFEFF`];function ga(t,e,a){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),a){for(var s in a)if(a[s])r=r?r+" "+s:s;else if(r.length)for(var u=s.length,l=0;(l=r.indexOf(s,l))>=0;){var d=l+u;(l===0||Ke.includes(r[l-1]))&&(d===r.length||Ke.includes(r[d]))?r=(l===0?"":r.substring(0,l))+r.substring(d+1):l=d}}return r===""?null:r}function ee(t,e,a,r,s,u){var l=t.__className;if(F||l!==a){var d=ga(a,r,u);(!F||d!==t.getAttribute("class"))&&(d==null?t.removeAttribute("class"):t.className=d),t.__className=a}else if(u)for(var _ in u){var y=!!u[_];(s==null||y!==!!s[_])&&t.classList.toggle(_,y)}return u}function ya(t){ce(t,t.v+1)}function wa(t){let e=0,a=Ee(0),r;return()=>{Gt()&&(o(a),pt(()=>(e===0&&(r=mt(()=>t(()=>ya(a)))),e+=1,()=>{Xt().then(()=>{e-=1,e===0&&(r==null||r(),r=void 0)})})))}}var ae,re;class xa{constructor(e,a){me(this,ae);me(this,re);pe(this,ae,e),pe(this,re,wa(a))}get current(){return ve(this,re).call(this),ve(this,ae).call(this)}}ae=new WeakMap,re=new WeakMap;const Aa=/\(.+\)/;class ka extends xa{constructor(e,a){let r=Aa.test(e)?e:`(${e})`;const s=window.matchMedia(r);super(()=>s.matches,u=>sa(s,"change",u))}}function Ea(t){const e=JSON.parse(t);return e.data&&(e.data=da(e.data,va.decoders)),e}function ge(t){return HTMLElement.prototype.cloneNode.call(t)}function ye(t,e=()=>{}){const a=async({action:s,result:u,reset:l=!0,invalidateAll:d=!0})=>{u.type==="success"&&(l&&HTMLFormElement.prototype.reset.call(t),d&&await fa()),(location.origin+location.pathname===s.origin+s.pathname||u.type==="redirect"||u.type==="error")&&await ua(u)};async function r(s){var C,S,A,P,v;if(((C=s.submitter)!=null&&C.hasAttribute("formmethod")?s.submitter.formMethod:ge(t).method)!=="post")return;s.preventDefault();const l=new URL((S=s.submitter)!=null&&S.hasAttribute("formaction")?s.submitter.formAction:ge(t).action),d=(A=s.submitter)!=null&&A.hasAttribute("formenctype")?s.submitter.formEnctype:ge(t).enctype,_=new FormData(t),y=(P=s.submitter)==null?void 0:P.getAttribute("name");y&&_.append(y,((v=s.submitter)==null?void 0:v.getAttribute("value"))??"");const g=new AbortController;let H=!1;const b=await e({action:l,cancel:()=>H=!0,controller:g,formData:_,formElement:t,submitter:s.submitter})??a;if(H)return;let c;try{const n=new Headers({accept:"application/json","x-sveltekit-action":"true"});d!=="multipart/form-data"&&n.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(d)?d:"application/x-www-form-urlencoded");const h=d==="multipart/form-data"?_:new URLSearchParams(_),f=await fetch(l,{method:"POST",headers:n,cache:"no-store",body:h,signal:g.signal});c=Ea(await f.text()),c.type==="error"&&(c.status=f.status)}catch(n){if((n==null?void 0:n.name)==="AbortError")return;c={type:"error",error:n}}await b({action:l,formData:_,formElement:t,update:n=>a({action:l,result:c,reset:n==null?void 0:n.reset,invalidateAll:n==null?void 0:n.invalidateAll}),result:c})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",r),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",r)}}}var Ve="mz3PUW_p",Qe=["#FFC700","#FF0000","#2E3191","#41BBC7"],Ye=3500,Ge=.5,Xe=150,Ze="mix",$e=12,et="",tt=!0,at=800,rt=1600;function we(t,e={}){let{colors:a=Qe,duration:r=Ye,force:s=Ge,particleCount:u=Xe,particleShape:l=Ze,particleSize:d=$e,particleClass:_=et,destroyAfterDone:y=tt,stageHeight:g=at,stageWidth:H=rt}=e;(function(v){if(document.querySelector("style[data-neoconfetti]"))return;const n=xe("style");n.dataset.neoconfetti="",n.textContent=v,Ae(document.head,n)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),t.classList.add("mz3PUW_c"),t.style.setProperty("--sh",g+"px");let m=[],b=[];const c=()=>te(O()*(Ma-1)),C=(v,n)=>l!=="rectangles"&&(v==="circles"||za(n));function S(v,n){const h=c(),f=C(l,h),i=(k,x)=>v.style.setProperty(k,x+"");i("--xlp",ke(oe(lt(n,90)-180),0,180,-H/2,H/2)+"px"),i("--dc",r-te(1e3*O())+"ms");const p=O()<Ta?G(O()*Pa,2):0;i("--x1",p),i("--x2",-1*p),i("--x3",p),i("--x4",G(oe(ke(oe(lt(n,90)-180),0,180,-1,1)),4)),i("--y1",G(O()*nt,4)),i("--y2",G(O()*s*(_t()?1:-1),4)),i("--y3",nt),i("--y4",G(Ca(ke(oe(n-180),0,180,s,-s),0),4)),i("--w",(f?d:te(4*O())+d/2)+"px"),i("--h",(f?d:te(2*O())+d)+"px");const w=h.toString(2).padStart(3,"0").split("");i("--hr",w.map(k=>+k/2+"").join(" ")),i("--r",w.join(" ")),i("--rd",G(O()*(Sa-st)+st)+"ms"),i("--br",f?"50%":0)}let A;function P(){t.innerHTML="",clearTimeout(A),m=it(u,a),b=function(v,n=[],h){const f=[];for(const{color:i}of n){const p=xe("div");p.className=`${Ve} ${h}`,p.style.setProperty("--bgc",i);const w=xe("div");Ae(p,w),Ae(v,p),f.push(p)}return f}(t,m,_);for(const[v,n]of ot(b))S(n,m[+v].degree);A=setTimeout(()=>{y&&(t.innerHTML="")},r)}return P(),{update(v){const n=v.particleCount??Xe,h=v.particleShape??Ze,f=v.particleSize??$e,i=v.particleClass??et,p=v.colors??Qe,w=v.stageHeight??at,k=v.duration??Ye,x=v.force??Ge,E=v.stageWidth??rt,N=v.destroyAfterDone??tt;m=it(n,p);let j=!1;if(n===u){b=Array.from(t.querySelectorAll(`.${Ve}`));for(const[I,{color:M}]of ot(m)){const T=b[+I];JSON.stringify(a)!==JSON.stringify(p)&&T.style.setProperty("--bgc",M),h!==l&&T.style.setProperty("--br",C(h,c())?"50%":"0"),i!==_&&(_&&T.classList.remove(_),i&&T.classList.add(i))}}else j=!0;y&&!N&&clearTimeout(A),t.style.setProperty("--sh",w+"px"),r=k,a=p,s=x,u=n,l=h,d=f,_=i,y=N,g=w,H=E,j&&P()},destroy(){t.innerHTML="",clearTimeout(A)}}}var st=200,Sa=800,Ta=.1,Pa=.3,nt=.5,oe=Math.abs,O=Math.random,te=Math.round,Ca=Math.max,xe=t=>document.createElement(t),Ae=(t,e)=>t.appendChild(e),it=(t,e)=>Array.from({length:t},(a,r)=>({color:e[r%e.length],degree:360*r/t})),G=(t,e=2)=>te((t+Number.EPSILON)*10**e)/10**e,ke=(t,e,a,r,s)=>(t-e)*(s-r)/(a-e)+r,lt=(t,e)=>t+e>360?t+e-360:t+e,_t=()=>O()>.5,ot=Object.entries,Ma=6,za=t=>t!==1&&_t();function ct(t,e,a){var s;t.preventDefault();const r=t.target.getAttribute("data-key");r==="backspace"?(ce(e,Se(o(e).slice(0,-1))),(s=a())!=null&&s.badGuess&&a(a().badGuess=!1,!0)):o(e).length<5&&ce(e,o(e)+r)}var Ha=R('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-1pg2j5l">'),ja=R('<div> <span class="visually-hidden svelte-1pg2j5l"><!></span> <input name="guess" type="hidden" class="svelte-1pg2j5l"></div>'),La=R('<h2 class="visually-hidden svelte-1pg2j5l"> </h2> <div></div>',1),Na=R('<p class="svelte-1pg2j5l"> </p>'),Wa=R('<!> <button data-key="enter" class="restart selected svelte-1pg2j5l" formaction="?/restart"> </button>',1),Ua=R('<button formaction="?/update" name="key"> </button>'),Ia=R('<div class="row svelte-1pg2j5l"></div>'),Da=R('<div class="keyboard svelte-1pg2j5l"><button data-key="enter">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-1pg2j5l">back</button> <!></div>'),Oa=R('<div style="position: absolute; left: 50%; top: 30%" class="svelte-1pg2j5l"></div>'),Ra=R('<h1 class="visually-hidden svelte-1pg2j5l">Sverdle</h1> <form method="post" action="?/enter" class="svelte-1pg2j5l"><a class="how-to-play svelte-1pg2j5l" href="/sverdle/how-to-play">How to play</a> <div></div> <div class="controls svelte-1pg2j5l"><!></div></form> <!>',1);function Ga(t,e){Zt(e,!0);let a=la(e,"form",15);const r=new ka("(prefers-reduced-motion: reduce)");let s=L(()=>e.data.answers.at(-1)==="xxxxx"),u=L(()=>o(s)?-1:e.data.answers.length),l=$t(Se(e.data.guesses[o(u)]||""));ea(()=>{ce(l,Se(e.data.guesses[o(u)]||""))});let d=L(()=>o(l).length===5);const _=L(()=>{let f={},i={};return e.data.answers.forEach((p,w)=>{const k=e.data.guesses[w];for(let x=0;x<5;x+=1){const E=k[x];p[x]==="x"?(f[E]="exact",i[E]="correct"):f[E]||(f[E]=p[x]==="c"?"close":"missing",i[E]=p[x]==="c"?"present":"absent")}}),{classnames:f,description:i}}),y=L(()=>o(_).classnames),g=L(()=>o(_).description);function H(f){var i;f.metaKey||f.key==="Enter"&&!o(d)||(i=document.querySelector(`[data-key="${f.key}" i]`))==null||i.dispatchEvent(new MouseEvent("click",{cancelable:!0,bubbles:!0}))}var m=Ra();ia("keydown",ra,H),oa(f=>{var i=Ha();aa.title="Sverdle",z(f,i)});var b=D(Z(m),2),c=D(q(b),2);let C;le(c,20,()=>Array.from(Array(6).keys()),f=>f,(f,i)=>{var p=La();const w=L(()=>i===o(u));var k=Z(p),x=q(k);U(k);var E=D(k,2);let N;le(E,20,()=>Array.from(Array(5).keys()),j=>j,(j,I)=>{var M=ja();const T=L(()=>o(w)?o(l):e.data.guesses[i]),B=L(()=>{var W;return(W=e.data.answers[i])==null?void 0:W[I]}),Ce=L(()=>{var W;return((W=o(T))==null?void 0:W[I])??""}),gt=L(()=>o(w)&&I===o(T).length),Me=L(()=>o(B)==="x"),ze=L(()=>o(B)==="c"),He=L(()=>o(B)==="_");let je;var Le=q(M),fe=D(Le),yt=q(fe);{var wt=W=>{var se=ie("(correct)");z(W,se)},xt=W=>{var se=Ue(),At=Z(se);{var kt=V=>{var ne=ie("(present)");z(V,ne)},Et=V=>{var ne=Ue(),St=Z(ne);{var Tt=Q=>{var de=ie("(absent)");z(Q,de)},Pt=Q=>{var de=ie("empty");z(Q,de)};Y(St,Q=>{o(He)?Q(Tt):Q(Pt,!1)},!0)}z(V,ne)};Y(At,V=>{o(ze)?V(kt):V(Et,!1)},!0)}z(W,se)};Y(yt,W=>{o(Me)?W(wt):W(xt,!1)})}U(fe);var ue=D(fe,2);ca(ue),U(M),K(()=>{je=ee(M,1,"letter svelte-1pg2j5l",null,je,{exact:o(Me),close:o(ze),missing:o(He),selected:o(gt)}),$(Le,`${o(Ce)??""} `),ue.disabled=!o(w),Re(ue,o(Ce))}),z(j,M)}),U(E),K(()=>{$(x,`Row ${i+1}`),N=ee(E,1,"row svelte-1pg2j5l",null,N,{current:o(w)})}),z(f,p)}),U(c);var S=D(c,2),A=q(S);{var P=f=>{var i=Wa(),p=Z(i);{var w=E=>{var N=Na(),j=q(N);U(N),K(()=>$(j,`the answer was "${e.data.answer??""}"`)),z(E,N)};Y(p,E=>{!o(s)&&e.data.answer&&E(w)})}var k=D(p,2),x=q(k);U(k),K(()=>$(x,`${(o(s)?"you won :)":"game over :(")??""} play again?`)),z(f,i)},v=f=>{var i=Da(),p=q(i);let w;var k=D(p,2);k.__click=[ct,l,a];var x=D(k,2);le(x,16,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],Fe,(E,N)=>{var j=Ia();le(j,21,()=>N,Fe,(I,M)=>{var T=Ua();T.__click=[ct,l,a];var B=q(T,!0);U(T),K(()=>{qe(T,"data-key",o(M)),ee(T,1,_a(o(y)[o(M)]),"svelte-1pg2j5l"),T.disabled=o(d),Re(T,o(M)),qe(T,"aria-label",`${o(M)??""} ${o(g)[o(M)]||""}`),$(B,o(M))}),z(I,T)}),U(j),z(E,j)}),U(i),K(()=>{p.disabled=!o(d),w=ee(p,1,"svelte-1pg2j5l",null,w,{selected:o(d)})}),z(f,i)};Y(A,f=>{o(s)||e.data.answers.length>=6?f(P):f(v,!1)})}U(S),U(b),Je(b,(f,i)=>ye==null?void 0:ye(f,i),()=>()=>({update:f})=>{f({reset:!1})});var n=D(b,2);{var h=f=>{var i=Oa();Je(i,(p,w)=>we==null?void 0:we(p,w),()=>({particleCount:r.current?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),z(f,i)};Y(n,f=>{o(s)&&f(h)})}K(()=>{var f;return C=ee(c,1,"grid svelte-1pg2j5l",null,C,{playing:!o(s),"bad-guess":(f=a())==null?void 0:f.badGuess})}),z(t,m),ta()}na(["click"]);export{Ga as component};
